# 监控告警

Harbor 支持接入 HTTP 消息通知服务，当监控到配置的告警项目达到阈值后，Harbor 将会先消息通知服务发起`GET`请求。

## 接入配置

在设置页面中，有监控告警卡片可进行接入配置，卡片如下图所示。

![OAuth2](/image/alarm.png)

其中各个输入项:

* 通知地址: 接收`GET`请求的消息通知服务地址，Harbor 将自动在地址末尾拼接告警通知的内容，请注意URL参数顺序
* 通知间隔: 默认 3 小时，在通知间隔时间内只会通知 1 次，避免消息频繁发送(不影响日志)
* 负载阈值: CPU负载，不管是瞬时负载还是五分钟、十五分钟负载，只要超过就会触发
* 内存阈值: 内存占用比例
* 磁盘阈值: 磁盘空间已使用比例

> 通知地址示例 <br/>
> `https://domain.com/push?token=demo&text=` <br/>
> Harbor 将会在末尾也就是`text=`之后拼接上通知内容。

### 配置文件

上述配置在配置文件中如下所示

```ini
[alarm]
enable=是否启用(0或1)
path=通知地址
interval=通知间隔(整数/小时)
event=触发事件(逗号分隔)
loadthreshold=负载阈值(小数,最大为1)
memorythreshold=内存阈值(整数,最大100)
diskthreshold=磁盘阈值(整数,最大100)
```

## 监控频率

Harbor 会每分钟检查一次宿主机的负载和资源占用情况，而容器和引擎的监控告警则是由事件监听器触发。